<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://www.oasis-open.org/docbook/xml/5.0/rng/docbookxi.rng"
        schematypens="http://relaxng.org/ns/structure/1.0"?>

<sect1 role="taskdef" xml:id="Relentless" xmlns="http://docbook.org/ns/docbook"
       xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
    <title>Relentless</title>
    <para>The &lt;relentless&gt; task will execute all of the nested tasks, regardless of whether one or more of the
        nested tasks fails.
    </para>
    <para>When &lt;relentless&gt; has completed executing the nested tasks, it will either
        <itemizedlist>
            <listitem>
                <para>fail, if any one or more of the nested tasks failed; or</para>
            </listitem>
            <listitem>
                <para>succeed, if all of the nested tasks succeeded.</para>
            </listitem>
        </itemizedlist>
        An appropriate message will be written to the log.
    </para>
    <para>Tasks are executed in the order that they appear within the &lt;relentless&gt; task. It is up to the user to
        ensure that relentless execution of the nested tasks is safe.
    </para>
    <table>
        <title>Attributes</title>
        <tgroup cols="5">
            <colspec colname="name" colnum="1" colwidth="1.5*"/>
            <colspec colname="type" colnum="2" colwidth="0.8*"/>
            <colspec colname="description" colnum="3" colwidth="3.5*"/>
            <colspec colname="default" colnum="4" colwidth="0.8*"/>
            <colspec colname="required" colnum="5" colwidth="1.2*"/>
            <thead>
                <row>
                    <entry>Name</entry>
                    <entry>Type</entry>
                    <entry>Description</entry>
                    <entry>Default</entry>
                    <entry>Required</entry>
                </row>
            </thead>
            <tbody>
                <row>
                    <entry>
                        <literal>description</literal>
                    </entry>
                    <entry>
                        <literal role="type">String</literal>
                    </entry>
                    <entry>A string that will be included in the log output. This can be useful for helping to identify
                        sections of large phing builds.
                    </entry>
                    <entry>N/A</entry>
                    <entry>No</entry>
                </row>
                <row>
                    <entry>
                        <literal>terse</literal>
                    </entry>
                    <entry>
                        <literal role="type">Boolean</literal>
                    </entry>
                    <entry>Setting this to true will eliminate some of the progress output generated by &lt;relentless&gt;.
                        This can reduce clutter in some cases.
                    </entry>
                    <entry>false</entry>
                    <entry>No</entry>
                </row>
            </tbody>
        </tgroup>
    </table>
    <para>The only nested element supported by &lt;relentless&gt; is a list of tasks to be executed. At least one task
        must be specified.
    </para>
    <para>It is important to note that &lt;relentless&gt; only proceeds relentlessly from one task to the next - it does
        not apply recursively to any tasks that might be invoked by these nested tasks. If a nested task invokes some
        other list of tasks (perhaps by &lt;phingcall&gt; for example), and one of those other tasks fails, then the
        nested task will stop at that point.
    </para>
    <sect2>
        <title>Example</title>
        <para>A relentless task to print out the first five canonical variable names:</para>
        <programlisting lang="xml">&lt;relentless description="The first five canonical variable names."&gt;
    &lt;echo&gt;foo&lt;/echo&gt;
    &lt;echo&gt;bar&lt;/echo&gt;
    &lt;echo&gt;baz&lt;/echo&gt;
    &lt;echo&gt;bat&lt;/echo&gt;
    &lt;echo&gt;blah&lt;/echo&gt;
&lt;/relentless&gt;
        </programlisting>
        <para>which should produce output looking more or less like</para>
        <programlisting>[relentless] Relentlessly executing: The first five canonical variable names.
[relentless] Executing: task 1
[echo] foo
[relentless] Executing: task 2
[echo] bar
[relentless] Executing: task 3
[echo] baz
[relentless] Executing: task 4
[echo] bat
[relentless] Executing: task 5
[echo] blah
[relentless] All tasks completed successfully.
        </programlisting>
        <para>If you change the first line to set the <literal>terse</literal> parameter,
        </para>
        <programlisting lang="xml">&lt;relentless terse="true" description="The first five canonical variable names."/&gt;</programlisting>
        <para>the output will look more like this:</para>
        <programlisting>[relentless] Relentlessly executing: The first five canonical variable names.
[echo] foo
[echo] bar
[echo] baz
[echo] bat
[echo] blah
[relentless] All tasks completed successfully.
        </programlisting>
        <para>If we change the third task to deliberately fail</para>
        <programlisting language="xml">&lt;relentless terse="true"
    description="The first five canonical variable names."&gt;
    &lt;echo&gt;foo&lt;/echo&gt;
    &lt;echo&gt;bar&lt;/echo&gt;
    &lt;fail&gt;baz&lt;/fail&gt;
    &lt;echo&gt;bat&lt;/echo&gt;
    &lt;echo&gt;blah&lt;/echo&gt;
&lt;/relentless&gt;
        </programlisting>
        <para>then the output should look something like this.</para>
        <programlisting>[relentless] Relentlessly executing: The first five canonical variable names.
[echo] foo
[echo] bar
[relentless] Task task 3 failed: baz
[echo] bat
[echo] blah

BUILD FAILED
/path/build.xml:1177: Relentless execution: 1 of 5 tasks failed.
        </programlisting>
    </sect2>
</sect1>
